import"../scss/styles.scss";import{Carousel}from"bootstrap";import{initializeApp}from"firebase/app";import{getFirestore,setDoc,doc,getDoc}from"firebase/firestore";import{getStorage,ref,uploadBytes,uploadString}from"firebase/storage";const firebaseConfig={apiKey:"AIzaSyDHjvrenveN0OBqC167mRxsmxWN7D4M6Wc",authDomain:"rumblebots-website.firebaseapp.com",projectId:"rumblebots-website",storageBucket:"rumblebots-website.appspot.com",messagingSenderId:"445812151859",appId:"1:445812151859:web:b409a58e9f7eb869c57546",measurementId:"G-D8XD7NLTM7",databaseURL:"https://rumblebots-website-default-rtdb.firebaseio.com/",storageBucket:"gs://rumblebots-website.appspot.com/"},app=initializeApp(firebaseConfig),db=getFirestore(app),storage=getStorage();if(document.querySelectorAll(".card-inner").forEach((e=>{e.addEventListener("click",(t=>{e.classList.toggle("is-flipped")}))})),document.querySelector("#sponsorCarousel")&&new Carousel(document.querySelector("#sponsorCarousel"),{interval:1500,touch:!0}),document.querySelector("#majorInput")){var select=document.querySelector("#majorInput"),otherMajorInput=document.querySelector("#other-major"),undo=document.querySelector(".input-group-append");select.addEventListener("change",(function(){"Other..."===select.value?(otherMajorInput.style.display="block",select.style.display="none",undo.style.display="block"):otherMajorInput.style.display="none"})),undo.addEventListener("click",(function(){otherMajorInput.style.display="none",select.style.display="block",undo.style.display="none"}))}if(document.getElementById("application")){const e=9e5;var filePassed=!1,application=document.getElementById("application");application.addEventListener("submit",(async function(t){t.preventDefault();var o=document.getElementById("submitBtn"),r=document.getElementById("nameInput").value,a=document.getElementById("emailInput").value,i=document.getElementById("majorInput").value,s=document.getElementById("other-major").value,n=document.getElementById("bioInput").value;let l=document.getElementById("fileInput").files[0];if("Other..."==i){if(""==s)return void myFail("Please input a major");i=s}const c=doc(db,"applicationV4",a),u=await getDoc(c);if(u.exists()){console.log("here");const t=new Date(Date.now()).getTime()-Number(u.data().dateUploaded);if(t<e)return void myFail("You've already submitted an application today you have "+(15-Math.round(t/1e3/60))+" minutes left.")}const d=ref(storage,`app_uploads/${r}'s Upload`);if("pdf"===getFileType(l))if("upr.edu"===getEmailDomain(a))if(o.innerHTML='<i class="fa fa-circle-o-notch fa-spin"></i> loading...',await uploadBytes(d,l).then((e=>{console.log("Uploaded file to storage!"),filePassed=!0})).catch((e=>{console.error("Failed to upload file to storage",e),filePassed=!1})),filePassed){const e=new Date(Date.now()),t={name:r,email:a,major:i,bio:n,file:d.fullPath,dateUploaded:e.getTime().toString()};await setDoc(c,t),myclear(),Myalert(),o.innerHTML="Submit Application",setTimeout((()=>{window.location.replace("./index.html")}),2e3)}else o.innerHTML="Submit Application",myFail("Failed to upload file to storage");else myFail("Please enter a valid UPR email");else myFail("Your resume has to be a PDF")}))}function getFileType(e){return e.name.split(".").pop()}function getEmailDomain(e){return e.split("@").pop()}function myclear(){document.getElementById("application").reset()}function Myalert(){$.bootstrapGrowl("Thank you for submitting your application.",{type:"success",align:"center",delay:3e3,allow_dismiss:!1,stackup_spacing:10})}function myFail(e){$.bootstrapGrowl(e,{type:"danger",align:"center",delay:3e3,allow_dismiss:!1,stackup_spacing:10})}if(document.getElementById("typewriter")){var typeWriter=document.getElementById("typewriter"),cursor=document.getElementById("cursor"),textArray=["design.","manufacture.","code.","test.","optimize.","market.","RUMBLE."];function delWriter(e,t,o){if(t>=0){typeWriter.innerHTML=e.substring(0,t--);var r=10+100*Math.random();cursor.classList.remove("cursor-blink"),cursor.classList.add("cursor-static"),setTimeout((function(){delWriter(e,t,o)}),r)}else"function"==typeof o&&(cursor.classList.remove("cursor-static"),cursor.classList.add("cursor-blink"),setTimeout(o,1e3))}function typer(e,t,o){if(t<e.length+1){typeWriter.innerHTML=e.substring(0,t++);var r=150-100*Math.random();cursor.classList.remove("cursor-blink"),cursor.classList.add("cursor-static"),setTimeout((function(){typer(e,t++,o)}),r)}else t===e.length+1&&(cursor.classList.remove("cursor-static"),cursor.classList.add("cursor-blink"),setTimeout((function(){delWriter(e,t,o)}),2e3))}function startTyping(e){void 0===textArray[e]?setTimeout((function(){startTyping(0)}),1e3):e<textArray[e].length+1&&typer(textArray[e],0,(function(){startTyping(e+1)}))}cursor.classList.add("cursor-blink"),setTimeout((function(){cursor.classList.remove("cursor-blink"),cursor.classList.add("cursor-static"),startTyping(0)}),1e3)}